(function(){var m=function(b){return"[object Object]"===Object.prototype.toString.call(b)},n=function(b){return"[object Array]"===Object.prototype.toString.call(b)},j=function(b){if(n(b))return 0===b.length;if(m(b))for(var a in b)if(hasOwnProperty.call(b,a))return!1;return!0},h=function(b,a,c){var d;d=function(a,c,b){var d=[],g=function(a,e){var g=d.length+1;d.push(function(){return c(a,e,function(a){var c=d[g];return!a&&c?c():!a&&!c?b():b(a)})})};if(n(a)&&!j(a))for(var i=0,h=a.length;i<h;i++)g(i,
a[i]);else if(m(a)&&!j(a))for(i in a)a.hasOwnProperty(i)&&g(i,a[i]);else return b();return d[0]()};return"undefined"===typeof c?function(a,c){if(n(a)&&!j(a))for(var b=0,d=a.length;b<d;b++)c(b,a[b]);if(m(a)&&!j(a))for(var g in a)a.hasOwnProperty(g)&&c(g,a[g])}.apply(this,arguments):d.apply(this,arguments)},o=function(){this.length=0};o.prototype.addError=function(b){this[this.length]=b;this.length++};h({getProperties:"property",getMessages:"message"},function(b,a){o.prototype[b]=function(){for(var c=
[],b=0,e=this.length;b<e;b++){var f=this[b][a];-1===c.indexOf(f)&&c.push(f)}return c}});var k=function(b){var a=this;this.Errors=new o;h(["singleError","validators"],function(c,d){a[d]=b[d]})};k.prototype.validateProperty=function(b,a,c,d){var e=this,f=function(d,f,g){if(c[d])f(b,a,c[d],c,function(f){return f?(e.Errors.addError({property:b,propertyValue:a,validator:d,validatorValue:c[d],message:f}),e.singleError?g(!0):g()):g()});else return g()};return!0!==c.required&&"undefined"===typeof a?d():h(e.validators,
f,d)};k.prototype.validate=function(b,a,c){var d=this;return this.validateSchema(b,a,"",function(){return c(0<d.Errors.length?d.Errors:void 0)})};k.prototype.validateSchema=function(b,a,c,d){var e=this;return-1!==["object","array"].indexOf(a.type)?e.validateProperty(c,b,a,function(){return a.properties?h(a.properties,function(d,l,h){var g="object"===l.type&&l.properties,i="array"===l.type,j=e.getProperty(b,d),k=0===c.length?d:c+"."+d;return g||i?e.validateSchema(j,a.properties[d],k,h):e.validateProperty(k,
j,l,h)},d):a.items?b&&!j(b)?-1!==["object","array"].indexOf(a.items.type)?h(b,function(b,d,h){return e.validateSchema(d,a.items,c+"["+b+"]",h)},d):h(b,function(b,d,h){return e.validateProperty(c+"["+b+"]",d,a.items,h)},d):d():d()}):e.validateProperty(c,b,a,d)};k.prototype.getProperty=function(b,a){if(b)return b[a]};var p={required:function(b,a,c,d,e){return c&&!a?e(!0):e()},type:function(){var b={object:function(a){return"[object Object]"===Object.prototype.toString.call(a)},array:function(a){return"[object Array]"===
Object.prototype.toString.call(a)}};["string","number","function","boolean"].forEach(function(a){b[a]=function(b){return typeof b===a}});return function(a,c,d,e,f){return"[object Array]"===Object.prototype.toString.call(d)?options.some(function(a){return b[a](c)})?f():f(!0):b[d](c)?f():f(!0)}}(),format:function(){var b={alpha:function(a){return"string"===typeof a&&a.match(/^[a-zA-Z]+$/)},alphanumeric:function(a){return"string"===typeof a&&/^[a-zA-Z0-9]+$/.test(a)||"number"===typeof a},ipv4:function(a){return"string"===
typeof a&&a.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)},ipv6:function(a){return"string"===typeof a&&a.match(/(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|(?:(?:[a-f\d]{1,4}:)*[a-f\d]{1,4})?::(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))?)/)},ip:function(a){return b.ipv4(a)||b.ipv6},email:function(a){return"string"===typeof a&&a.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)},
url:function(a){return"string"===typeof a&&a.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/)},
date:function(a){return"[object Date]"===Object.prototype.toString.call(a)},decimal:function(a){return/^[0-9]+(\.[0-9]{1,2})?$/.test(a)},"int":function(a){return/^-?[0-9]+$/.test(a)},percentage:function(a){return"string"==typeof a&&a.match(/^-?[0-9]{0,2}(\.[0-9]{1,2})?$|^-?(100)(\.[0]{1,2})?$/)||-100<=a&&100>=a},port:function(a){return/\:\d+/.test(a)},regexp:function(a){return a&&a.test&&a.exec},unsignedInt:function(a){return/^[0-9]+$/.test(a)}};return function(a,c,d,e,f){return"[object Array]"===
Object.prototype.toString.call(d)?options.some(function(a){return b[a](c)})?f():f(!0):b[d](c)?f():f(!0)}}(),length:function(b,a,c,d,e){return"string"===typeof a?Array.isArray(c)&&(a.length<c[0]||a.length>c[1])?e(!0):"number"===typeof c&&a.length!==c?e(!0):e():e()},"enum":function(b,a,c,d,e){return-1===c.indexOf(a)?e(!0):e()},except:function(b,a,c,d,e){return-1!==c.indexOf(a)?e(!0):e()},min:function(b,a,c,d,e){return"number"!==typeof a||a<c?e(!0):e()},max:function(b,a,c,d,e){return"number"!==typeof a||
a>c?e(!0):e()},pattern:function(b,a,c,d,e){return"string"===typeof a&&!a.match(c)?e(!0):e()}},q={validate:function(b,a,c,d){"function"===typeof c&&(d=c,c={singleError:!0});c.validators=p;return(new k(c)).validate(b,a,d)},addValidator:function(b,a){p[b]=a},getVersion:function(){return"0.2.0"},getValidators:function(){return p}};"undefined"!==typeof module&&module.exports?module.exports=q:"undefined"!==typeof define?define(function(){return q}):this.amanda=q})();